--AUTHOR: Kingsly Bude

--Dropping the specified database if it exists
DROP DATABASE IF EXISTS dbRaceVenue;
GO

--Creating a brand new Database
CREATE DATABASE dbRaceVenue;
GO

--Making sure all of the upcoming queries use the new database
USE dbRaceVenue;
GO


--CREATE STATEMENTS
--Dropping the specified table if it exists, and then creating it afterwards with a clean slate
DROP TABLE IF EXISTS VENUE;
CREATE TABLE VENUE(
	VENUE_ID INT PRIMARY KEY,
	VENUE_NAME VARCHAR(50) NOT NULL,
	VENUE_CONTACT_PHONE VARCHAR(10) NOT NULL,
	VENUE_CONTACT_EMAIL VARCHAR(50),
);

--Dropping the specified table if it exists, and then creating it afterwards with a clean slate
DROP TABLE IF EXISTS DRIVER_CLASS;
CREATE TABLE DRIVER_CLASS(
	DRIVER_CLASS_ID VARCHAR(2) PRIMARY KEY,
	DRIVER_CLASS_DESC VARCHAR(60) NOT NULL,
	DRIVER_CLASS_SOLO_READY BIT NOT NULL
);

--Dropping the specified table if it exists, and then creating it afterwards with a clean slate
DROP TABLE IF EXISTS CLIENT;
CREATE TABLE CLIENT(
	CLIENT_ID INT PRIMARY KEY,
	CLIENT_LNAME VARCHAR(30) NOT NULL,
	CLIENT_FNAME VARCHAR(30) NOT NULL,
	CLIENT_PHONE VARCHAR(10) NOT NULL,
	CLIENT_EMAIL VARCHAR(50) NOT NULL,
	CLIENT_DRIVER_CLASS_ID VARCHAR(2) NOT NULL FOREIGN KEY REFERENCES DRIVER_CLASS (DRIVER_CLASS_ID)
);

--Dropping the specified table if it exists, and then creating it afterwards with a clean slate
DROP TABLE IF EXISTS EVENT;
CREATE TABLE EVENT(
	EVENT_ID INT PRIMARY KEY,
	EVENT_NAME VARCHAR(50),
	EVENT_DATE DATE NOT NULL,
	EVENT_VENUE_ID INT NOT NULL FOREIGN KEY REFERENCES VENUE (VENUE_ID),
	EVENT_EARLY_BIRD_PRICE SMALLMONEY,
	EVENT_REGULAR_PRICE SMALLMONEY NOT NULL,
	EVENT_IS_ROADTRIP BIT
);

--Dropping the specified table if it exists, and then creating it afterwards with a clean slate
DROP TABLE IF EXISTS INSTRUCTOR;
CREATE TABLE INSTRUCTOR(
	INSTRUCTOR_ID INT PRIMARY KEY,
	INSTRUCTOR_LNAME VARCHAR(30) NOT NULL,
	INSTRUCTOR_FNAME VARCHAR(30) NOT NULL,
	INSTRUCTOR_PHONE VARCHAR(10) NOT NULL,
	INSTRUCTOR_EMAIL VARCHAR(50),
	INSTRUCTOR_NOTES VARCHAR(255) NOT NULL
);

--Dropping the specified table if it exists, and then creating it afterwards with a clean slate
DROP TABLE IF EXISTS REGISTRATION;
CREATE TABLE REGISTRATION(
	REG_ID INT PRIMARY KEY,
	REG_EVENT_ID INT NOT NULL FOREIGN KEY REFERENCES EVENT (EVENT_ID),
	REG_CLIENT_ID INT NOT NULL FOREIGN KEY REFERENCES CLIENT  (CLIENT_ID),
	REG_DRIVER_CLASS VARCHAR(2) NOT NULL FOREIGN KEY REFERENCES DRIVER_CLASS (DRIVER_CLASS_ID),
	REG_INSTRUCTOR_ID INT FOREIGN KEY REFERENCES INSTRUCTOR (INSTRUCTOR_ID),
	REG_IS_PAID BIT
);




--INSERT STATEMENTS
--Inserting example data into the specified table based on the example data provided
INSERT INTO VENUE
VALUES (1, 'DDT @ Canadian Tire Motorsport Park', '9059837223', 'VenueONE@gmail.com');
INSERT INTO VENUE
VALUES (2, 'Pinestone Resort', '7054571800', 'VenueTWO@gmail.com');
INSERT INTO VENUE
VALUES (3, 'Test Venue NO.3', '2895553333', 'VenueTHREE@gmail.com');
INSERT INTO VENUE
VALUES (4, 'Test Venue NO.4', '2895554444', 'VenueFOUR@gmail.com');
INSERT INTO VENUE
VALUES (5, 'Test Venue NO.5', '2895555555', 'VenueFIVE@gmail.com');

--Inserting example data into the specified table based on the example data provided
INSERT INTO DRIVER_CLASS
VALUES ('B', 'Beginner', 'FALSE');
INSERT INTO DRIVER_CLASS
VALUES ('I', 'Intermediate', 'FALSE');
INSERT INTO DRIVER_CLASS
VALUES ('IS', 'Intermediate Solo', 'TRUE');
INSERT INTO DRIVER_CLASS
VALUES ('A', 'Advanced', 'TRUE');
INSERT INTO DRIVER_CLASS
VALUES ('R', 'Racer', 'TRUE');

--Inserting example data into the specified table based on the example data provided
INSERT INTO INSTRUCTOR(INSTRUCTOR_ID, INSTRUCTOR_FNAME, INSTRUCTOR_LNAME, INSTRUCTOR_PHONE, INSTRUCTOR_NOTES)
VALUES (1, 'Dylan', 'Gibson', '4167255323', 'CASC Champion (multi)');
INSERT INTO INSTRUCTOR(INSTRUCTOR_ID, INSTRUCTOR_FNAME, INSTRUCTOR_LNAME, INSTRUCTOR_PHONE, INSTRUCTOR_NOTES)
VALUES (2, 'Bill', 'Chalkias', '4167375500', 'Long racing history. Hands on exotic car dealer.');
INSERT INTO INSTRUCTOR(INSTRUCTOR_ID, INSTRUCTOR_FNAME, INSTRUCTOR_LNAME, INSTRUCTOR_PHONE, INSTRUCTOR_EMAIL, INSTRUCTOR_NOTES)
VALUES (3, 'Corey', 'Spelling', '9052524252', 'cspells@rogers.com', 'Former Jim Rusell instructor.');
INSERT INTO INSTRUCTOR(INSTRUCTOR_ID, INSTRUCTOR_FNAME, INSTRUCTOR_LNAME, INSTRUCTOR_PHONE, INSTRUCTOR_EMAIL, INSTRUCTOR_NOTES)
VALUES (4, 'Rick', 'Morelli', '9057977084', 'morelliautosport@gmail.com', 'Experience HPDE instructor, amateur racer.');
INSERT INTO INSTRUCTOR(INSTRUCTOR_ID, INSTRUCTOR_FNAME, INSTRUCTOR_LNAME, INSTRUCTOR_PHONE, INSTRUCTOR_EMAIL, INSTRUCTOR_NOTES)
VALUES (5, 'Kenny', 'Jones', '9055555555', 'Kenny.Jones@gmail.com', 'Former NASCAR camera guy.');
INSERT INTO INSTRUCTOR(INSTRUCTOR_ID, INSTRUCTOR_FNAME, INSTRUCTOR_LNAME, INSTRUCTOR_PHONE, INSTRUCTOR_EMAIL, INSTRUCTOR_NOTES)
VALUES (6, 'Mick', 'Burdock', '6473933333', 'MB1960@gmail.com', 'Former NASCAR camera guy.');

--INSERT STATEMENTS
--I could have avoided specifying each column if I inserted the last name first and the first name second
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(1, 'Paris', 'Weir', '7075446677', 'pweir@hotmail.com', 'B');
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(2, 'Carter', 'Augustus', '4167274252', 'cahavinfuneh@gmail.com', 'B');
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(3, 'Ricky', 'Bobby', '2492344700', 'ifiaintfirstimlast@marjorbrandco.com', 'A');
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(4, 'Tommy', 'Kendall', '4245234621', 'tkendall@sprint.com', 'R');
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(5, 'Jason', 'Puff', '9052626242', 'Jason.puff@rogers.com', 'IS');
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(6, 'Eve', 'Roberto', '9052626242', 'EveRoberto@hotmail.com', 'B');
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(7, 'Gaben', 'Northwalk', '9052626243', 'Gaben.Northwalk@gmail.com', 'A');
INSERT INTO CLIENT(CLIENT_ID, CLIENT_FNAME, CLIENT_LNAME, CLIENT_PHONE, CLIENT_EMAIL, CLIENT_DRIVER_CLASS_ID)
VALUES(8, 'Susan', 'Whitaker', '9052626244', 'Susan.Whitaker@yahoo.com', 'R');

--Inserting example data into the specified table based on the example data provided
INSERT INTO EVENT
VALUES(1, 'Rid the Rust', '2022-04-30', 1, 425, 575, 'FALSE');
INSERT INTO EVENT
VALUES(2, 'Fair Weather Acceleration', '2022-05-13', 1, 425, 575, 'FALSE');
INSERT INTO EVENT
VALUES(3, 'Rev Like a Lion', '2022-05-30', 1, 625, 750, 'FALSE');
INSERT INTO EVENT
VALUES(4, 'Back in the Big House', '2022-06-07', 1, 625, 750, 'FALSE');
INSERT INTO EVENT
VALUES(5, 'Studded on Ice', '2022-02-22', 2, 625, 750, 'FALSE');
INSERT INTO EVENT
VALUES(6, 'Another Event', '2022-07-04', 2, 425, 575, 'FALSE');
INSERT INTO EVENT
VALUES(7, 'Holy Moly Aother Driving Event', '2022-07-05', 2, 425, 575, 'FALSE');
INSERT INTO EVENT
VALUES(8, 'Raid the Rust TWO', '2023-01-02', 3, 625, 750, 'FALSE');

--Inserting example data into the specified table based on the example data provided
INSERT INTO REGISTRATION
VALUES(1, 1, 5, 'A', 2, 'TRUE');
INSERT INTO REGISTRATION(REG_ID, REG_EVENT_ID, REG_CLIENT_ID, REG_DRIVER_CLASS, REG_IS_PAID)
VALUES(2, 1, 1, 'B', 'TRUE');
INSERT INTO REGISTRATION
VALUES(3, 1, 2, 'B', 4, 'TRUE');
INSERT INTO REGISTRATION(REG_ID, REG_EVENT_ID, REG_CLIENT_ID, REG_DRIVER_CLASS, REG_IS_PAID)
VALUES(4, 1, 4, 'R', 'TRUE');
INSERT INTO REGISTRATION
VALUES(5, 1, 3, 'A', 2, 'TRUE');
INSERT INTO REGISTRATION(REG_ID, REG_EVENT_ID, REG_CLIENT_ID, REG_DRIVER_CLASS, REG_IS_PAID)
VALUES(6, 5, 4, 'R', 'TRUE');
INSERT INTO REGISTRATION(REG_ID, REG_EVENT_ID, REG_CLIENT_ID, REG_DRIVER_CLASS, REG_IS_PAID)
VALUES(7, 5, 2, 'B', 'TRUE');
INSERT INTO REGISTRATION(REG_ID, REG_EVENT_ID, REG_CLIENT_ID, REG_DRIVER_CLASS, REG_IS_PAID)
VALUES(8, 5, 3, 'A', 'TRUE');
INSERT INTO REGISTRATION
VALUES(9, 2, 6, 'A', 5, 'FALSE');
INSERT INTO REGISTRATION
VALUES(10, 3, 6, 'B', 6, 'FALSE');
INSERT INTO REGISTRATION
VALUES(11, 4, 7, 'A', 6, 'FALSE');
INSERT INTO REGISTRATION
VALUES(12, 6, 7, 'R', 5, 'FALSE');
INSERT INTO REGISTRATION
VALUES(13, 7, 5, 'R', 6, 'FALSE');
